<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>表格</title>
    <!-- 引入 Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* 樣式設置 */
        .table-container {
            margin: 20px 0;
        }

        table {
            margin: 20px 0;
            text-align: center;
        }

        th,
        td {
            padding: 12px;
            border: 1px solid #ddd;
            width: 33.33%;
        }

        th {
            background-color: #f2f2f2;
        }

        input[type="text"],
        select {
            padding: 10px;
            font-size: 18px;
            border: 1px solid #ddd;
            width: 100%;
        }

        .images {
            margin-top: 20px;
        }

        .images img {
            max-width: 100%;
        }

        .results {
            margin-top: 20px;
            font-size: 18px;
        }

        .number-range {
            font-size: 14px;
            color: #888;
            margin-top: 5px;
        }

        .copy-button {
            margin-left: 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div id="app" class="container">
        <div class="table-container row">
            <!-- 表格區域 -->
            <div class="col-md-6">
                <table class="table table-bordered">
                    <tr>
                        <th>回合</th>
                        <th>數字</th>
                        <th>區域</th>
                    </tr>
                    <template v-for="(row, index) in rows" :key="index">
                        <tr v-if="canShow(index)">
                            <td>{{ row.currentRound }}</td>
                            <td>
                                <!-- 數字輸入框 -->
                                <input type="text" v-model="row.card" @input="debouncedHandleInput(index, row)"
                                    :disabled="!canEdit(index) || isNextFilled(index)">
                                <div class="number-range">可填數字: 1-{{ getMaxNumber(row.currentRound) }}</div>
                            </td>
                            <td>
                                <!-- 區域選擇框 -->
                                <select v-model="row.box" :disabled="!canEdit(index) || isNextFilled(index)">
                                    <option v-for="option in getOptions(row.currentRound)" :value="option.value">
                                        {{ option.text }}
                                    </option>
                                </select>
                            </td>
                        </tr>
                    </template>
                </table>
            </div>
            <!-- 圖片區域，當前回合尚未完成時顯示 -->
            <div class="images col-12 col-md-6" v-if="!allRoundsCompleted">
                <img v-for="(image, index) in currentRoundImages" :src="image" :key="index">
            </div>
            <!-- 結果區域，所有回合完成後顯示 -->
            <div class="results col-12 col-md-6" v-if="allRoundsCompleted">
                <p hidden>輸出: {{ formattedResults }}</p>
                <p>本次操作序號為：</p>
                <p style="white-space: normal;word-wrap: break-word;overflow-wrap: break-word;">{{ base64Output }}</p>
                <!-- 複製按鈕 -->
                <button class="btn btn-outline-primary copy-button" @click="copyToClipboard(base64Output)">複製</button>
                <p hidden>解碼: {{ decodedBase64 }}</p>
            </div>
        </div>
    </div>

    <!-- 引入 Vue 3 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.4.27/dist/vue.global.min.js"></script>
    <!-- 引入 Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main-min.js"></script>
</body>

</html>
